---
layout: post
title:  "Mongodb中创建索引以及片键"
date:   2019-08-26 22:35
categories: MongoDB
tags: MongoDB 索引 片键
excerpt: 总结随笔
author: Pythonbug
mathjax: true
---

## 1、登录
```shell
mongo 192.168.8.8:27017/iptvqoe -u qoe -p 123456
```

## 2、创建索引
```shell
## 创建复合索引
use iptvqoe
db.IPTV_EQUIPMENT_MIN.createIndex({"area_code":1,"record_date":1})
## 创建ttl索引，record_date为日期型
db.IPTV_EQUIPMENT_MIN.createIndex({"record_date":1},{expireAfterSeconds:86400})
```

## 3、创建片键
```shell
## 重新登陆
mongo 192.168.8.8:27017/admin -u clusterAdmin -p 123456
use admin
## iptvqoe数据库启用分片
sh.enableSharding("iptvqoe")
sh.shardCollection("iptvqoe.IPTV_EQUIPMENT_MIN",{"record_date":1})
```